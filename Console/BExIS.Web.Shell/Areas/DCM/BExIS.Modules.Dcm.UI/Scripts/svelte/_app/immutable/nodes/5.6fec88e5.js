import{S as Ie,i as qe,s as De,y as D,z as C,A as N,g as w,d as E,B as $,e as be,b as O,P as Bt,h as b,a1 as Rt,a2 as jt,k as I,a as V,q as J,l as q,m as M,c as F,r as Y,n as G,G as h,K as Se,u as Me,o as tt,w as j,V as z,W as Q,Q as nt,C as zt,D as Qt,E as Wt,F as Xt,v as He,f as Ke,H as st,a3 as Jt,R as Yt,T as Zt,U as xt,a4 as en,a5 as bt,L as qt,X as tn}from"../chunks/index.5cde3559.js";import{F as Ge,e as nn,d as sn,g as an}from"../chunks/floating-ui.dom.browser.min.469e0c62.js";import{s as Dt}from"../chunks/store.53a40dd4.js";import{S as Ct}from"../chunks/Spinner.2e89e3a9.js";import{C as Nt,d as ln,b as rn,s as on,c as un,e as fn,f as cn,a as dn,h as mn,i as gn,j as _n,g as pn}from"../chunks/EntityTemplateCaller.5a6149b8.js";import{S as hn,i as bn,k as kn}from"../chunks/Select.074a881e.js";import{S as kt}from"../chunks/SlideToggle.ec9f182f.js";import{I as $t,T as vn}from"../chunks/TextInput.e0ec1766.js";import{D as vt}from"../chunks/DropdownKvP.330880fc.js";import{K as yn,V as wn,v as Oe,w as Te,T as En}from"../chunks/vest.production.37468dc2.js";import{P as Tn}from"../chunks/Page.a124e89c.js";function yt(s,t,n){const e=s.slice();return e[8]=t[n],e}function wt(s){let t,n,e,a,l=!1,r,o,i=s[8].value+"",c,f,p,m,y;return p=jt(s[7][0]),{c(){t=I("label"),n=I("input"),r=V(),o=I("p"),c=J(i),f=V(),this.h()},l(k){t=q(k,"LABEL",{class:!0,for:!0});var S=M(t);n=q(S,"INPUT",{class:!0,type:!0}),r=F(S),o=q(S,"P",{});var L=M(o);c=Y(L,i),L.forEach(b),f=F(S),S.forEach(b),this.h()},h(){G(n,"class","checkbox"),G(n,"type","checkbox"),n.checked=e=s[8].key,n.__value=a=s[8].key,n.value=n.__value,G(t,"class","flex items-center space-x-2"),G(t,"for",s[3]),p.p(n)},m(k,S){O(k,t,S),h(t,n),n.checked=~(s[0]||[]).indexOf(n.__value),h(t,r),h(t,o),h(o,c),h(t,f),m||(y=Se(n,"change",s[6]),m=!0)},p(k,S){S&2&&e!==(e=k[8].key)&&(n.checked=e),S&2&&a!==(a=k[8].key)&&(n.__value=a,n.value=n.__value,l=!0),(l||S&3)&&(n.checked=~(k[0]||[]).indexOf(n.__value)),S&2&&i!==(i=k[8].value+"")&&Me(c,i),S&8&&G(t,"for",k[3])},d(k){k&&b(t),p.r(),m=!1,y()}}}function Sn(s){let t,n=s[1],e=[];for(let a=0;a<n.length;a+=1)e[a]=wt(yt(s,n,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=be()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=be()},m(a,l){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(a,l);O(a,t,l)},p(a,l){if(l&11){n=a[1];let r;for(r=0;r<n.length;r+=1){const o=yt(a,n,r);e[r]?e[r].p(o,l):(e[r]=wt(o),e[r].c(),e[r].m(t.parentNode,t))}for(;r<e.length;r+=1)e[r].d(1);e.length=n.length}},d(a){Bt(e,a),a&&b(t)}}}function In(s){let t,n;return t=new $t({props:{label:s[2],feedback:s[4],required:qn,$$slots:{default:[Sn]},$$scope:{ctx:s}}}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p(e,[a]){const l={};a&4&&(l.label=e[2]),a&2059&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}let qn=!1;function Dn(s,t,n){let{source:e}=t,{target:a}=t,{title:l}=t,{description:r=""}=t,{key:o}=t,i;const c=[[]];function f(){a=Rt(c[0],this.__value,this.checked),n(0,a)}return s.$$set=p=>{"source"in p&&n(1,e=p.source),"target"in p&&n(0,a=p.target),"title"in p&&n(2,l=p.title),"description"in p&&n(5,r=p.description),"key"in p&&n(3,o=p.key)},[a,e,l,o,i,r,f,c]}class Cn extends Ie{constructor(t){super(),qe(this,t,Dn,In,De,{source:1,target:0,title:2,description:5,key:3})}}function Nn(s){let t,n,e;function a(r){s[11](r)}let l={class:"select variant-form-material",items:s[0],itemId:s[2],label:s[3],multiple:s[4],placeholder:"-- Please select --"};return s[7]!==void 0&&(l.value=s[7]),t=new hn({props:l}),j.push(()=>z(t,"value",a)),{c(){D(t.$$.fragment)},l(r){C(t.$$.fragment,r)},m(r,o){N(t,r,o),e=!0},p(r,o){const i={};o&1&&(i.items=r[0]),o&4&&(i.itemId=r[2]),o&8&&(i.label=r[3]),o&16&&(i.multiple=r[4]),!n&&o&128&&(n=!0,i.value=r[7],Q(()=>n=!1)),t.$set(i)},i(r){e||(w(t.$$.fragment,r),e=!0)},o(r){E(t.$$.fragment,r),e=!1},d(r){$(t,r)}}}function $n(s){let t,n;return t=new $t({props:{label:s[1],feedback:s[6],required:s[5],$$slots:{default:[Nn]},$$scope:{ctx:s}}}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p(e,[a]){const l={};a&2&&(l.label=e[1]),a&64&&(l.feedback=e[6]),a&32&&(l.required=e[5]),a&16541&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function Vn(s,t,n){let e,{source:a}=t,{target:l}=t,{title:r}=t,{itemId:o="value"}=t,{label:i="label"}=t,{isMulti:c=!0}=t,{isComplex:f=!1}=t,{isTargetComplex:p=!1}=t,{required:m=!1}=t,{feedback:y=[]}=t,k=!1;function S(g){if(console.log("------"),f&&!p&&k){console.log("a) source is complex model is simple"),n(8,l=[]);for(let H in g){let T=g[H];l.push(T[o])}}if(!f&&!p&&k){n(8,l=[]);for(let H in g)l.push(g[H].value)}console.log("selection "+r,g),console.log("target "+r,l)}tt(async()=>{if(f&&!p){let g=[];for(let H in l){let T=l[H];g.push(a.find(P=>P.key===T))}k=!0,g.length>0&&n(7,e=g)}!f&&!p&&(k=!0,l!=null&&l!==void 0&&l!=""&&n(7,e=l))});function L(g){e=g,n(7,e)}return s.$$set=g=>{"source"in g&&n(0,a=g.source),"target"in g&&n(8,l=g.target),"title"in g&&n(1,r=g.title),"itemId"in g&&n(2,o=g.itemId),"label"in g&&n(3,i=g.label),"isMulti"in g&&n(4,c=g.isMulti),"isComplex"in g&&n(9,f=g.isComplex),"isTargetComplex"in g&&n(10,p=g.isTargetComplex),"required"in g&&n(5,m=g.required),"feedback"in g&&n(6,y=g.feedback)},s.$$.update=()=>{s.$$.dirty&128&&S(e)},n(7,e=null),[a,r,o,i,c,m,y,e,l,f,p,L]}class Fe extends Ie{constructor(t){super(),qe(this,t,Vn,$n,De,{source:0,target:8,title:1,itemId:2,label:3,isMulti:4,isComplex:9,isTargetComplex:10,required:5,feedback:6})}}function Et(s){let t;return{c(){t=J(s[1])},l(n){t=Y(n,s[1])},m(n,e){O(n,t,e)},p(n,e){e&2&&Me(t,n[1])},d(n){n&&b(t)}}}function Fn(s){let t;return{c(){t=J("no action setup")},l(n){t=Y(n,"no action setup")},m(n,e){O(n,t,e)},d(n){n&&b(t)}}}function Mn(s){let t,n,e,a,l,r,o,i=s[2].text+"",c,f,p,m,y,k=s[3].text+"",S,L,g,H,T=s[1]&&Et(s);const P=s[5].default,W=zt(P,s,s[6],null),B=W||Fn();return{c(){t=I("header"),n=I("h2"),e=J(s[0]),a=V(),l=I("section"),T&&T.c(),r=V(),o=I("p"),c=J(i),f=V(),p=I("br"),m=V(),y=I("span"),S=J(k),L=V(),g=I("footer"),B&&B.c(),this.h()},l(v){t=q(v,"HEADER",{class:!0});var U=M(t);n=q(U,"H2",{class:!0});var oe=M(n);e=Y(oe,s[0]),oe.forEach(b),U.forEach(b),a=F(v),l=q(v,"SECTION",{class:!0});var K=M(l);T&&T.l(K),r=F(K),o=q(K,"P",{});var ee=M(o);c=Y(ee,i),ee.forEach(b),f=F(K),p=q(K,"BR",{}),m=F(K),y=q(K,"SPAN",{});var ue=M(y);S=Y(ue,k),ue.forEach(b),K.forEach(b),L=F(v),g=q(v,"FOOTER",{class:!0});var fe=M(g);B&&B.l(fe),fe.forEach(b),this.h()},h(){G(n,"class","h2"),G(t,"class","card-header"),G(l,"class","p-4"),G(g,"class","card-footer")},m(v,U){O(v,t,U),h(t,n),h(n,e),O(v,a,U),O(v,l,U),T&&T.m(l,null),h(l,r),h(l,o),h(o,c),h(l,f),h(l,p),h(l,m),h(l,y),h(y,S),O(v,L,U),O(v,g,U),B&&B.m(g,null),H=!0},p(v,U){(!H||U&1)&&Me(e,v[0]),v[1]?T?T.p(v,U):(T=Et(v),T.c(),T.m(l,r)):T&&(T.d(1),T=null),(!H||U&4)&&i!==(i=v[2].text+"")&&Me(c,i),(!H||U&8)&&k!==(k=v[3].text+"")&&Me(S,k),W&&W.p&&(!H||U&64)&&Qt(W,P,v,v[6],H?Xt(P,v[6],U,null):Wt(v[6]),null)},i(v){H||(w(B,v),H=!0)},o(v){E(B,v),H=!1},d(v){v&&b(t),v&&b(a),v&&b(l),T&&T.d(),v&&b(L),v&&b(g),B&&B.d(v)}}}function Gn(s){let t,n;return t=new Nt({props:{$$slots:{default:[Mn]},$$scope:{ctx:s}}}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p(e,[a]){const l={};a&79&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function Hn(s,t,n){let{$$slots:e={},$$scope:a}=t,{id:l}=t,{name:r=""}=t,{description:o=""}=t,{entityType:i}=t,{metadataStructure:c}=t;return nt(),s.$$set=f=>{"id"in f&&n(4,l=f.id),"name"in f&&n(0,r=f.name),"description"in f&&n(1,o=f.description),"entityType"in f&&n(2,i=f.entityType),"metadataStructure"in f&&n(3,c=f.metadataStructure),"$$scope"in f&&n(6,a=f.$$scope)},[r,o,i,c,l,e,a]}class Kn extends Ie{constructor(t){super(),qe(this,t,Hn,Gn,De,{id:4,name:0,description:1,entityType:2,metadataStructure:3})}}function Tt(s,t,n){const e=s.slice();return e[4]=t[n],e[6]=n,e}function On(s){let t,n;return t=new Ct({}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p:st,i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function Pn(s){let t=[],n=new Map,e,a,l=s[0];const r=o=>o[4].id;for(let o=0;o<l.length;o+=1){let i=Tt(s,l,o),c=r(i);n.set(c,t[o]=St(c,i))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=be()},l(o){for(let i=0;i<t.length;i+=1)t[i].l(o);e=be()},m(o,i){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(o,i);O(o,e,i),a=!0},p(o,i){i&7&&(l=o[0],He(),t=Jt(t,i,r,1,o,l,n,e.parentNode,en,St,e,Tt),Ke())},i(o){if(!a){for(let i=0;i<l.length;i+=1)w(t[i]);a=!0}},o(o){for(let i=0;i<t.length;i+=1)E(t[i]);a=!1},d(o){for(let i=0;i<t.length;i+=1)t[i].d(o);o&&b(e)}}}function Un(s){let t,n,e,a,l,r,o,i,c;return n=new Ge({props:{icon:nn}}),l=new Ge({props:{icon:sn}}),{c(){t=I("button"),D(n.$$.fragment),e=V(),a=I("button"),D(l.$$.fragment),r=V(),this.h()},l(f){t=q(f,"BUTTON",{class:!0});var p=M(t);C(n.$$.fragment,p),p.forEach(b),e=F(f),a=q(f,"BUTTON",{class:!0});var m=M(a);C(l.$$.fragment,m),m.forEach(b),r=F(f),this.h()},h(){G(t,"class","btn variant-ringed-primary"),G(a,"class","btn variant-ringed-secondary")},m(f,p){O(f,t,p),N(n,t,null),O(f,e,p),O(f,a,p),N(l,a,null),O(f,r,p),o=!0,i||(c=[Se(t,"click",function(){bt(s[1](s[4].id))&&s[1](s[4].id).apply(this,arguments)}),Se(a,"click",function(){bt(s[2](s[6],s[4].id))&&s[2](s[6],s[4].id).apply(this,arguments)})],i=!0)},p(f,p){s=f},i(f){o||(w(n.$$.fragment,f),w(l.$$.fragment,f),o=!0)},o(f){E(n.$$.fragment,f),E(l.$$.fragment,f),o=!1},d(f){f&&b(t),$(n),f&&b(e),f&&b(a),$(l),f&&b(r),i=!1,qt(c)}}}function St(s,t){let n,e,a;const l=[t[4]];let r={$$slots:{default:[Un]},$$scope:{ctx:t}};for(let o=0;o<l.length;o+=1)r=Yt(r,l[o]);return e=new Kn({props:r}),{key:s,first:null,c(){n=be(),D(e.$$.fragment),this.h()},l(o){n=be(),C(e.$$.fragment,o),this.h()},h(){this.first=n},m(o,i){O(o,n,i),N(e,o,i),a=!0},p(o,i){t=o;const c=i&1?Zt(l,[xt(t[4])]):{};i&129&&(c.$$scope={dirty:i,ctx:t}),e.$set(c)},i(o){a||(w(e.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),a=!1},d(o){o&&b(n),$(e,o)}}}function An(s){let t,n,e,a;const l=[Pn,On],r=[];function o(i,c){return i[0]?0:1}return n=o(s),e=r[n]=l[n](s),{c(){t=I("div"),e.c(),this.h()},l(i){t=q(i,"DIV",{class:!0});var c=M(t);e.l(c),c.forEach(b),this.h()},h(){G(t,"class","py-5 w-full grid grid-cols-2 md:grid-cols-3 gap-4")},m(i,c){O(i,t,c),r[n].m(t,null),a=!0},p(i,[c]){let f=n;n=o(i),n===f?r[n].p(i,c):(He(),E(r[f],1,1,()=>{r[f]=null}),Ke(),e=r[n],e?e.p(i,c):(e=r[n]=l[n](i),e.c()),w(e,1),e.m(t,null))},i(i){a||(w(e),a=!0)},o(i){E(e),a=!1},d(i){i&&b(t),r[n].d()}}}function Ln(s,t,n){const e=nt();let{entitytemplates:a}=t;function l(o){console.log("edit",o),e("edit",o)}async function r(o,i){console.log(o,i),await ln(i)===!0&&n(0,a=a.filter((f,p)=>p!==o))}return s.$$set=o=>{"entitytemplates"in o&&n(0,a=o.entitytemplates)},[a,l,r]}class Bn extends Ie{constructor(t){super(),qe(this,t,Ln,An,De,{entitytemplates:0})}}const Pe=yn((s={},t)=>{wn(t),Oe("name","name is required",()=>{Te(s.name).isNotBlank()}),Oe("description","description is required",()=>{Te(s.description).isNotBlank()}),Oe("metadataStructure","metadatastructure is required",()=>{Te(s.metadataStructure).isNotNull(),Te(s.metadataStructure).isNotUndefined()}),Oe("entityType","entity is required",()=>{Te(s.entityType).isNotNull(),Te(s.entityType).isNotUndefined()})});function Rn(s){let t,n;return t=new Ct({}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p:st,i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function jn(s){let t,n;return t=new Nt({props:{$$slots:{default:[Wn]},$$scope:{ctx:s}}}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p(e,a){const l={};a&1073742847&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function zn(s){let t;return{c(){t=J("Invalid save mode")},l(n){t=Y(n,"Invalid save mode")},m(n,e){O(n,t,e)},d(n){n&&b(t)}}}function Qn(s){let t;return{c(){t=J("Use datastructures?")},l(n){t=Y(n,"Use datastructures?")},m(n,e){O(n,t,e)},d(n){n&&b(t)}}}function It(s){let t,n,e;function a(r){s[21](r)}let l={key:"datastructures",title:"Datastructures",source:s[2]};return s[8].datastructureList!==void 0&&(l.target=s[8].datastructureList),t=new Cn({props:l}),j.push(()=>z(t,"target",a)),{c(){D(t.$$.fragment)},l(r){C(t.$$.fragment,r)},m(r,o){N(t,r,o),e=!0},p(r,o){const i={};o&4&&(i.source=r[2]),!n&&o&256&&(n=!0,i.target=r[8].datastructureList,Q(()=>n=!1)),t.$set(i)},i(r){e||(w(t.$$.fragment,r),e=!0)},o(r){E(t.$$.fragment,r),e=!1},d(r){$(t,r)}}}function Wn(s){let t,n,e,a,l,r,o,i,c,f,p,m,y,k,S,L,g,H,T,P,W,B,v,U,oe,K,ee,ue,fe,Z,Ce,d,Ue,Ne,Ae,Le,ce,ne,Be,Re,se,je,ze,$e,Qe,We,de,ae,Xe,Je,le,Ye,Ze,me,re,ke,xe,ge,ve,Ve,et,at;function Vt(u){s[14](u)}let lt={id:"name",label:"Name",valid:s[7].isValid("name"),invalid:s[7].hasErrors("name"),feedback:s[7].getErrors("name"),required:!0};s[8].name!==void 0&&(lt.value=s[8].name),e=new vn({props:lt}),j.push(()=>z(e,"value",Vt)),e.$on("input",s[12]);function Ft(u){s[15](u)}let rt={id:"entityType",title:"Entity",required:!0,source:s[4],valid:s[7].isValid("entityType"),invalid:s[7].hasErrors("entityType"),feedback:s[7].getErrors("entityType")};s[8].entityType!==void 0&&(rt.target=s[8].entityType),r=new vt({props:rt}),j.push(()=>z(r,"target",Ft)),r.$on("change",s[12]);function Mt(u){s[16](u)}let it={id:"description",label:"Description",valid:s[7].isValid("description"),invalid:s[7].hasErrors("description"),feedback:s[7].getErrors("description"),required:!0};s[8].description!==void 0&&(it.value=s[8].description),c=new En({props:it}),j.push(()=>z(c,"value",Mt)),c.$on("input",s[12]);function Gt(u){s[17](u)}let ot={id:"metadataStructure",title:"Structure",source:s[1],valid:s[7].isValid("metadataStructure"),invalid:s[7].hasErrors("metadataStructure"),feedback:s[7].getErrors("metadataStructure")};s[8].metadataStructure!==void 0&&(ot.target=s[8].metadataStructure),g=new vt({props:ot}),j.push(()=>z(g,"target",Gt)),g.$on("change",s[12]);function Ht(u){s[18](u)}let ut={title:"Required input fields",source:s[3],itemId:"key",label:"value",isComplex:!0};s[8].metadataFields!==void 0&&(ut.target=s[8].metadataFields),P=new Fe({props:ut}),j.push(()=>z(P,"target",Ht));function Kt(u){s[19](u)}let ft={name:"Invalid-save-mode",$$slots:{default:[zn]},$$scope:{ctx:s}};s[8].metadataInvalidSaveMode!==void 0&&(ft.value=s[8].metadataInvalidSaveMode),v=new kt({props:ft}),j.push(()=>z(v,"value",Kt));function Ot(u){s[20](u)}let ct={name:"Use datastructures?",$$slots:{default:[Qn]},$$scope:{ctx:s}};s[8].hasDatastructure!==void 0&&(ct.checked=s[8].hasDatastructure),Z=new kt({props:ct}),j.push(()=>z(Z,"checked",Ot));let A=s[8].hasDatastructure&&It(s);function Pt(u){s[22](u)}let dt={title:"Permission",source:s[5],itemId:"key",label:"value",isComplex:!0};s[8].permissionGroups!==void 0&&(dt.target=s[8].permissionGroups),ne=new Fe({props:dt}),j.push(()=>z(ne,"target",Pt));function Ut(u){s[23](u)}let mt={title:"Notification",source:s[5],itemId:"key",label:"value",isComplex:!0};s[8].notificationGroups!==void 0&&(mt.target=s[8].notificationGroups),se=new Fe({props:mt}),j.push(()=>z(se,"target",Ut));function At(u){s[24](u)}let gt={title:"Disabled hooks",source:s[0]};s[8].disabledHooks!==void 0&&(gt.target=s[8].disabledHooks),ae=new Fe({props:gt}),j.push(()=>z(ae,"target",At));function Lt(u){s[25](u)}let _t={title:"Allowed file types",source:s[6]};return s[8].allowedFileTypes!==void 0&&(_t.target=s[8].allowedFileTypes),le=new Fe({props:_t}),j.push(()=>z(le,"target",Lt)),ke=new Ge({props:{icon:bn}}),ve=new Ge({props:{icon:kn}}),{c(){t=I("form"),n=I("div"),D(e.$$.fragment),l=V(),D(r.$$.fragment),i=V(),D(c.$$.fragment),p=V(),m=I("div"),y=I("div"),k=I("h3"),S=J("Metadata"),L=V(),D(g.$$.fragment),T=V(),D(P.$$.fragment),B=V(),D(v.$$.fragment),oe=V(),K=I("div"),ee=I("h3"),ue=J("Datastructure"),fe=V(),D(Z.$$.fragment),d=V(),A&&A.c(),Ue=V(),Ne=I("h3"),Ae=J("Group"),Le=V(),ce=I("div"),D(ne.$$.fragment),Re=V(),D(se.$$.fragment),ze=V(),$e=I("h3"),Qe=J("Additional"),We=V(),de=I("div"),D(ae.$$.fragment),Je=V(),D(le.$$.fragment),Ze=V(),me=I("div"),re=I("button"),D(ke.$$.fragment),xe=V(),ge=I("button"),D(ve.$$.fragment),this.h()},l(u){t=q(u,"FORM",{});var _=M(t);n=q(_,"DIV",{class:!0});var X=M(n);C(e.$$.fragment,X),l=F(X),C(r.$$.fragment,X),i=F(X),C(c.$$.fragment,X),X.forEach(b),p=F(_),m=q(_,"DIV",{class:!0});var x=M(m);y=q(x,"DIV",{class:!0});var R=M(y);k=q(R,"H3",{});var ie=M(k);S=Y(ie,"Metadata"),ie.forEach(b),L=F(R),C(g.$$.fragment,R),T=F(R),C(P.$$.fragment,R),B=F(R),C(v.$$.fragment,R),R.forEach(b),oe=F(x),K=q(x,"DIV",{class:!0});var te=M(K);ee=q(te,"H3",{});var ye=M(ee);ue=Y(ye,"Datastructure"),ye.forEach(b),fe=F(te),C(Z.$$.fragment,te),d=F(te),A&&A.l(te),te.forEach(b),x.forEach(b),Ue=F(_),Ne=q(_,"H3",{});var we=M(Ne);Ae=Y(we,"Group"),we.forEach(b),Le=F(_),ce=q(_,"DIV",{class:!0});var _e=M(ce);C(ne.$$.fragment,_e),Re=F(_e),C(se.$$.fragment,_e),_e.forEach(b),ze=F(_),$e=q(_,"H3",{});var Ee=M($e);Qe=Y(Ee,"Additional"),Ee.forEach(b),We=F(_),de=q(_,"DIV",{class:!0});var pe=M(de);C(ae.$$.fragment,pe),Je=F(pe),C(le.$$.fragment,pe),pe.forEach(b),Ze=F(_),me=q(_,"DIV",{class:!0});var he=M(me);re=q(he,"BUTTON",{type:!0,class:!0});var pt=M(re);C(ke.$$.fragment,pt),pt.forEach(b),xe=F(he),ge=q(he,"BUTTON",{type:!0,class:!0});var ht=M(ge);C(ve.$$.fragment,ht),ht.forEach(b),he.forEach(b),_.forEach(b),this.h()},h(){G(n,"class","w-full grid grid-cols-1 md:grid-cols-2 gap-4"),G(y,"class","flex flex-col space-y-4"),G(K,"class","flex flex-col space-y-4"),G(m,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),G(ce,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),G(de,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),G(re,"type","submit"),G(re,"class","btn bg-slate-500"),re.disabled=s[9],G(ge,"type","button"),G(ge,"class","btn bg-warning-500"),G(me,"class","py-5")},m(u,_){O(u,t,_),h(t,n),N(e,n,null),h(n,l),N(r,n,null),h(n,i),N(c,n,null),h(t,p),h(t,m),h(m,y),h(y,k),h(k,S),h(y,L),N(g,y,null),h(y,T),N(P,y,null),h(y,B),N(v,y,null),h(m,oe),h(m,K),h(K,ee),h(ee,ue),h(K,fe),N(Z,K,null),h(K,d),A&&A.m(K,null),h(t,Ue),h(t,Ne),h(Ne,Ae),h(t,Le),h(t,ce),N(ne,ce,null),h(ce,Re),N(se,ce,null),h(t,ze),h(t,$e),h($e,Qe),h(t,We),h(t,de),N(ae,de,null),h(de,Je),N(le,de,null),h(t,Ze),h(t,me),h(me,re),N(ke,re,null),h(me,xe),h(me,ge),N(ve,ge,null),Ve=!0,et||(at=[Se(ge,"click",s[26]),Se(t,"submit",tn(s[11]))],et=!0)},p(u,_){const X={};_&128&&(X.valid=u[7].isValid("name")),_&128&&(X.invalid=u[7].hasErrors("name")),_&128&&(X.feedback=u[7].getErrors("name")),!a&&_&256&&(a=!0,X.value=u[8].name,Q(()=>a=!1)),e.$set(X);const x={};_&16&&(x.source=u[4]),_&128&&(x.valid=u[7].isValid("entityType")),_&128&&(x.invalid=u[7].hasErrors("entityType")),_&128&&(x.feedback=u[7].getErrors("entityType")),!o&&_&256&&(o=!0,x.target=u[8].entityType,Q(()=>o=!1)),r.$set(x);const R={};_&128&&(R.valid=u[7].isValid("description")),_&128&&(R.invalid=u[7].hasErrors("description")),_&128&&(R.feedback=u[7].getErrors("description")),!f&&_&256&&(f=!0,R.value=u[8].description,Q(()=>f=!1)),c.$set(R);const ie={};_&2&&(ie.source=u[1]),_&128&&(ie.valid=u[7].isValid("metadataStructure")),_&128&&(ie.invalid=u[7].hasErrors("metadataStructure")),_&128&&(ie.feedback=u[7].getErrors("metadataStructure")),!H&&_&256&&(H=!0,ie.target=u[8].metadataStructure,Q(()=>H=!1)),g.$set(ie);const te={};_&8&&(te.source=u[3]),!W&&_&256&&(W=!0,te.target=u[8].metadataFields,Q(()=>W=!1)),P.$set(te);const ye={};_&1073741824&&(ye.$$scope={dirty:_,ctx:u}),!U&&_&256&&(U=!0,ye.value=u[8].metadataInvalidSaveMode,Q(()=>U=!1)),v.$set(ye);const we={};_&1073741824&&(we.$$scope={dirty:_,ctx:u}),!Ce&&_&256&&(Ce=!0,we.checked=u[8].hasDatastructure,Q(()=>Ce=!1)),Z.$set(we),u[8].hasDatastructure?A?(A.p(u,_),_&256&&w(A,1)):(A=It(u),A.c(),w(A,1),A.m(K,null)):A&&(He(),E(A,1,1,()=>{A=null}),Ke());const _e={};_&32&&(_e.source=u[5]),!Be&&_&256&&(Be=!0,_e.target=u[8].permissionGroups,Q(()=>Be=!1)),ne.$set(_e);const Ee={};_&32&&(Ee.source=u[5]),!je&&_&256&&(je=!0,Ee.target=u[8].notificationGroups,Q(()=>je=!1)),se.$set(Ee);const pe={};_&1&&(pe.source=u[0]),!Xe&&_&256&&(Xe=!0,pe.target=u[8].disabledHooks,Q(()=>Xe=!1)),ae.$set(pe);const he={};_&64&&(he.source=u[6]),!Ye&&_&256&&(Ye=!0,he.target=u[8].allowedFileTypes,Q(()=>Ye=!1)),le.$set(he),(!Ve||_&512)&&(re.disabled=u[9])},i(u){Ve||(w(e.$$.fragment,u),w(r.$$.fragment,u),w(c.$$.fragment,u),w(g.$$.fragment,u),w(P.$$.fragment,u),w(v.$$.fragment,u),w(Z.$$.fragment,u),w(A),w(ne.$$.fragment,u),w(se.$$.fragment,u),w(ae.$$.fragment,u),w(le.$$.fragment,u),w(ke.$$.fragment,u),w(ve.$$.fragment,u),Ve=!0)},o(u){E(e.$$.fragment,u),E(r.$$.fragment,u),E(c.$$.fragment,u),E(g.$$.fragment,u),E(P.$$.fragment,u),E(v.$$.fragment,u),E(Z.$$.fragment,u),E(A),E(ne.$$.fragment,u),E(se.$$.fragment,u),E(ae.$$.fragment,u),E(le.$$.fragment,u),E(ke.$$.fragment,u),E(ve.$$.fragment,u),Ve=!1},d(u){u&&b(t),$(e),$(r),$(c),$(g),$(P),$(v),$(Z),A&&A.d(),$(ne),$(se),$(ae),$(le),$(ke),$(ve),et=!1,qt(at)}}}function Xn(s){let t,n,e,a;const l=[jn,Rn],r=[];function o(i,c){return i[8]?0:1}return t=o(s),n=r[t]=l[t](s),{c(){n.c(),e=be()},l(i){n.l(i),e=be()},m(i,c){r[t].m(i,c),O(i,e,c),a=!0},p(i,[c]){let f=t;t=o(i),t===f?r[t].p(i,c):(He(),E(r[f],1,1,()=>{r[f]=null}),Ke(),n=r[t],n?n.p(i,c):(n=r[t]=l[t](i),n.c()),w(n,1),n.m(e.parentNode,e))},i(i){a||(w(n),a=!0)},o(i){E(n),a=!1},d(i){r[t].d(i),i&&b(e)}}}function Jn(s,t,n){let e,a,{id:l=0}=t,{hooks:r=[]}=t,{metadataStructures:o=[]}=t,{dataStructures:i=[]}=t,{systemKeys:c=[]}=t,{entities:f=[]}=t,{groups:p=[]}=t,{filetypes:m=[]}=t;const y=nt();let k;console.log("edit"),Pe.reset(),tt(async()=>{console.log("start entity template",l),Dt("https://localhost:44345","davidschoene","123456"),S(),console.log("onmount")});async function S(){n(8,e=await rn(l)),console.log("load entity",e),l>0&&n(7,g=Pe(e))}async function L(){console.log("before submit",e);const d=await on(e);d!=!1&&(console.log("save",d),y("save",d))}let g=Pe.get();function H(d){setTimeout(async()=>{n(7,g=Pe(e,d.target.id))},10)}function T(d){s.$$.not_equal(e.name,d)&&(e.name=d,n(8,e),n(28,k))}function P(d){s.$$.not_equal(e.entityType,d)&&(e.entityType=d,n(8,e),n(28,k))}function W(d){s.$$.not_equal(e.description,d)&&(e.description=d,n(8,e),n(28,k))}function B(d){s.$$.not_equal(e.metadataStructure,d)&&(e.metadataStructure=d,n(8,e),n(28,k))}function v(d){s.$$.not_equal(e.metadataFields,d)&&(e.metadataFields=d,n(8,e),n(28,k))}function U(d){s.$$.not_equal(e.metadataInvalidSaveMode,d)&&(e.metadataInvalidSaveMode=d,n(8,e),n(28,k))}function oe(d){s.$$.not_equal(e.hasDatastructure,d)&&(e.hasDatastructure=d,n(8,e),n(28,k))}function K(d){s.$$.not_equal(e.datastructureList,d)&&(e.datastructureList=d,n(8,e),n(28,k))}function ee(d){s.$$.not_equal(e.permissionGroups,d)&&(e.permissionGroups=d,n(8,e),n(28,k))}function ue(d){s.$$.not_equal(e.notificationGroups,d)&&(e.notificationGroups=d,n(8,e),n(28,k))}function fe(d){s.$$.not_equal(e.disabledHooks,d)&&(e.disabledHooks=d,n(8,e),n(28,k))}function Z(d){s.$$.not_equal(e.allowedFileTypes,d)&&(e.allowedFileTypes=d,n(8,e),n(28,k))}const Ce=()=>y("cancel");return s.$$set=d=>{"id"in d&&n(13,l=d.id),"hooks"in d&&n(0,r=d.hooks),"metadataStructures"in d&&n(1,o=d.metadataStructures),"dataStructures"in d&&n(2,i=d.dataStructures),"systemKeys"in d&&n(3,c=d.systemKeys),"entities"in d&&n(4,f=d.entities),"groups"in d&&n(5,p=d.groups),"filetypes"in d&&n(6,m=d.filetypes)},s.$$.update=()=>{s.$$.dirty&128&&n(9,a=!g.isValid())},n(8,e=k),[r,o,i,c,f,p,m,g,e,a,y,L,H,l,T,P,W,B,v,U,oe,K,ee,ue,fe,Z,Ce]}class Yn extends Ie{constructor(t){super(),qe(this,t,Jn,Xn,De,{id:13,hooks:0,metadataStructures:1,dataStructures:2,systemKeys:3,entities:4,groups:5,filetypes:6})}}function Zn(s){let t,n,e,a,l,r;return e=new Ge({props:{icon:an}}),{c(){t=I("div"),n=I("button"),D(e.$$.fragment),this.h()},l(o){t=q(o,"DIV",{class:!0});var i=M(t);n=q(i,"BUTTON",{type:!0,class:!0});var c=M(n);C(e.$$.fragment,c),c.forEach(b),i.forEach(b),this.h()},h(){G(n,"type","button"),G(n,"class","btn variant-filled bg-secondary-400"),G(t,"class","w-full")},m(o,i){O(o,t,i),h(t,n),N(e,n,null),a=!0,l||(r=Se(n,"click",s[11]),l=!0)},p:st,i(o){a||(w(e.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),a=!1},d(o){o&&b(t),$(e),l=!1,r()}}}function xn(s){let t,n;return t=new Yn({props:{id:s[8],hooks:s[0],metadataStructures:s[1],dataStructures:s[2],systemKeys:s[3],entities:s[4],groups:s[5],filetypes:s[6]}}),t.$on("save",s[10]),t.$on("cancel",s[13]),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p(e,a){const l={};a&256&&(l.id=e[8]),a&1&&(l.hooks=e[0]),a&2&&(l.metadataStructures=e[1]),a&4&&(l.dataStructures=e[2]),a&8&&(l.systemKeys=e[3]),a&16&&(l.entities=e[4]),a&32&&(l.groups=e[5]),a&64&&(l.filetypes=e[6]),t.$set(l)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function es(s){let t,n,e,a,l,r;const o=[xn,Zn],i=[];function c(m,y){return m[7]?0:1}t=c(s),n=i[t]=o[t](s);function f(m){s[14](m)}let p={};return s[9]!==void 0&&(p.entitytemplates=s[9]),a=new Bn({props:p}),j.push(()=>z(a,"entitytemplates",f)),a.$on("edit",s[12]),{c(){n.c(),e=V(),D(a.$$.fragment)},l(m){n.l(m),e=F(m),C(a.$$.fragment,m)},m(m,y){i[t].m(m,y),O(m,e,y),N(a,m,y),r=!0},p(m,y){let k=t;t=c(m),t===k?i[t].p(m,y):(He(),E(i[k],1,1,()=>{i[k]=null}),Ke(),n=i[t],n?n.p(m,y):(n=i[t]=o[t](m),n.c()),w(n,1),n.m(e.parentNode,e));const S={};!l&&y&512&&(l=!0,S.entitytemplates=m[9],Q(()=>l=!1)),a.$set(S)},i(m){r||(w(n),w(a.$$.fragment,m),r=!0)},o(m){E(n),E(a.$$.fragment,m),r=!1},d(m){i[t].d(m),m&&b(e),$(a,m)}}}function ts(s){let t,n;return t=new Tn({props:{title:"Entity Templates",note:"On this page you can edit entity template.",$$slots:{default:[es]},$$scope:{ctx:s}}}),{c(){D(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,a){N(t,e,a),n=!0},p(e,[a]){const l={};a&263167&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function ns(s,t,n){let e,a,l=[],r=[],o=[],i=[],c=[],f=[],p=[],m=!1,y;tt(async()=>{console.log("start entity template"),Dt("https://localhost:44345","davidschoene","123456"),n(0,l=await un()),n(1,r=await fn()),n(2,o=await cn()),n(3,i=await dn()),n(4,c=await mn()),n(5,f=await gn()),n(6,p=await _n()),n(9,a=await pn()),console.log("hooks",l),console.log("metadataStructures",r),console.log("dataStructures",o),console.log("systemKeys",i),console.log("entities",c),console.log("groups",f),console.log("filetypes",p),console.log("entitytemplates",a)});async function k(T){const P=T.detail;console.log(P),n(9,a=a.filter(W=>W.id!==P.id)),n(9,a=[...a,P]),n(7,m=!1)}async function S(){n(8,e=0),n(7,m=!m)}async function L(T){""+T.detail,n(7,m=!1),setTimeout(async()=>{n(8,e=T.detail),n(7,m=!0)},500)}const g=()=>n(7,m=!1);function H(T){a=T,n(9,a),n(16,y)}return n(8,e=0),n(9,a=y),[l,r,o,i,c,f,p,m,e,a,k,S,L,g,H]}class gs extends Ie{constructor(t){super(),qe(this,t,ns,ts,De,{})}}export{gs as component};
