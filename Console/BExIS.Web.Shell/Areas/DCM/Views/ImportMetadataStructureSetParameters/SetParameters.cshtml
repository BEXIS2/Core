@model BExIS.Web.Shell.Areas.DCM.Models.ImportMetadata.ParametersModel
@using Telerik.Web.Mvc.UI;
@using System;
@using System.Web.Configuration;
@using BExIS.Web.Shell.Areas.DCM.Models;

@{
    

}

@using (Ajax.BeginForm("Save", "ImportMetadataStructureSetParameters", new AjaxOptions
{
    HttpMethod = "Post",
    UpdateTargetId = "ImportMetadataStructureSetParameters",
    OnSuccess = "OnSuccess",
    OnFailure = "OnFailure"
}))
{

<div id="ImportMetadataStructureSetParameters" class="wizardStep">

     <div class="wizardStep_Main">
        <div class="wizardStep_Header stepper">

            <h3>@Model.StepInfo.title</h3>
        </div>

        <div class="wizardStep_Description stepper">
         <p>In order for the system to show datasets described with the given metadata structure, please select a titel node and a description node of the imported schema and press Save before heading on to the next step.</p>   
        </div>
        
        <div class="wizardStep_Content stepper">
            <table>
                <tr >
                    <td class="labelColumn">
                        @Html.LabelFor(m => m.TitleNode)
                    </td>
                    <td>
                        <div id="titleSelectionContainer">
                            @Ajax.ActionLink("Select", "ShowListOfMetadataNodesTitle", "ImportMetadataStructureSetParameters", new {area = "DCM"},
                                new AjaxOptions
                                {
                                    HttpMethod = "GET",
                                    InsertionMode = InsertionMode.Replace,
                                    UpdateTargetId = "titleSelectionContainerWindow"
                                },
                                new {@class = "bx-button function"})
                        </div>
                        <div id="titleSelectionContainerWindow"></div>
                    </td>
                    <td>
                        @Model.TitleNode
                    </td>
                </tr>
                 <tr>
                    <td class="labelColumn">
                        @Html.LabelFor(m => m.DescriptionNode)
                    </td>
                     <td>
                         <div id="descriptionSelectionContainer">
                             @Ajax.ActionLink("Select", "ShowListOfMetadataNodesDescription", "ImportMetadataStructureSetParameters", new {area = "DCM"},
                                 new AjaxOptions
                                 {
                                     HttpMethod = "GET",
                                     InsertionMode = InsertionMode.Replace,
                                     UpdateTargetId = "descriptionSelectionContainerWindow"
                                 },
                                 new {@class = "bx-button function"})
                         </div>
                         <div id="descriptionSelectionContainerWindow"></div>
                     </td>
                     <td>
                         @Model.DescriptionNode
                     </td>
                </tr>
            </table>
            @*<br />
            <button type="submit" value="Save" name="submit"  class="t-button " >save</button>*@
        </div>
    </div>

     <div class="wizardStep_Success stepper">
 
           @if (Model != null)
           {
               if (Model.ErrorList != null)
               {
                   if (Model.ErrorList.Count == 0)
                   {
                       if (!Model.StepInfo.notExecuted) { <b>saved.</b>}

                   }
               }
           }
     </div>

     <div class="wizardStep_Error stepper">

        @Html.ValidationSummary(true)

        @if (Model != null)
        {
            if (Model.ErrorList != null)
            {
                if (Model.ErrorList.Count == 0)
                {


                }
                else
                { 
                   <ul>
                        @foreach (BExIS.IO.Transform.Validation.Exceptions.Error s in @Model.ErrorList)
                        { 
                            <li>@s.ToString()</li>
                        }
                   </ul>

                }
            }

        }
    </div>     

</div>

}

<style type="text/css">
    .labelColumn {
        width: 100px;
    }

</style>
<script type="text/javascript">

    function OnSuccess() {
     
    }

    function OnFailure(response) {
   
    }
</script>