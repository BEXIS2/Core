@using System.Collections.Generic
@using BExIS.Modules.Sam.UI.Models
@using Telerik.Web.Mvc.UI

@(Html.Telerik().Grid(new List<DatasetGridRowModel>())
        .Name("Grid_Datasets")
        .DataKeys(keys =>
        {
            keys.Add(d => d.Id);
        })
        .Columns(columns =>
        {
            columns.Bound(d => d.IsPublic)
            .ClientTemplate("<input type='checkbox' onclick='setPublicity(this.checked, <#= Id #>);' name='nothing' title='Checked \t -> \t public dataset \r Unchecked \t -> \t NOT public dataset' <#= IsPublic ? checked='checked' : '' #> />")
                   .Title("IsPublic")
                   .Width(64)
                   .Filterable(false)
                   .HtmlAttributes(new { style = "text-align:center" });
            columns.Bound(d => d.Id);
            columns.Bound(d => d.Title);
        })
        .DataBinding(dataBinding => dataBinding
                .Ajax()
                .Select("Datasets_Select", "DataPermissions")
                .OperationMode(GridOperationMode.Client)
        )
        .ClientEvents(events =>
        {
            events.OnRowSelect("OnRowSelected");
            events.OnDataBound("onDataBound");
        })
        .Filterable()
        .Sortable(sortable => sortable
            .OrderBy(orderby => orderby
                .Add(r => r.Id).Descending()))
        .Pageable(pageable =>
        {
            pageable.PageSize(10, new[] {10, 20, 50, 100});
            pageable.Style(GridPagerStyles.NextPreviousAndNumeric | GridPagerStyles.PageSizeDropDown);
        })
        .Selectable()
)

<script type="text/javascript">

    function onDataBound()
    {
        addTooltips();
        resetAllTelerikIconTitles();
    }

</script>